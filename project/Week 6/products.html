<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artisan Haven - Products</title>
    <meta name="description" content="Explore a wide range of unique, handmade products from local artisans at Artisan Haven.">
    <meta name="author" content="Your Name">
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts for Playfair Display and Open Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-container">
                <img src="https://placehold.co/80x80/A9B7A0/8B4513?text=Logo" alt="Artisan Haven Logo" class="logo">
                <div class="header-text">
                    <h1><a href="index.html" class="site-title">Artisan Haven</a></h1>
                    <p class="tagline">Local Artisans Marketplace</p>
                </div>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html" class="active">Products</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
            <button class="hamburger-menu" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <main>
        <section class="products-grid-section">
            <div class="container">
                <h3>Our Handcrafted Collection</h3>
                <p>Discover one-of-a-kind items made with passion and precision. From intricate jewelry to bespoke home decor, there's something for everyone.</p>

                <div class="product-grid" id="product-gallery">
                    <!-- Product items will be loaded dynamically by JavaScript -->
                </div>
                <div class="text-center">
                    <button id="load-more-btn" class="btn primary-btn">Load More Products</button>
                    <p id="no-more-products-message" style="display:none; margin-top: 20px; color: var(--text-color);">You've seen all our available products!</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; <span id="current-year"></span> Artisan Haven. All rights reserved.</p>
            <p>Last Modified: <span id="lastModified"></span></p>
            <p><a href="references.html">References & Citations</a></p>
            <div class="social-links">
                <a href="#" aria-label="Facebook Page"><i class="fab fa-facebook"></i></a>
                <a href="#" aria-label="Instagram Profile"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="Pinterest Profile"><i class="fab fa-pinterest"></i></a>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Additional JavaScript for products page dynamic content
        document.addEventListener('DOMContentLoaded', () => {
            const productGallery = document.getElementById('product-gallery');
            const loadMoreBtn = document.getElementById('load-more-btn');
            const noMoreProductsMessage = document.getElementById('no-more-products-message');
            let currentPage = 0;
            const itemsPerPage = 6; // Number of items to load at once

            // Array of objects representing product items
            const productItems = [
                {
                    title: "Hand-Carved Wooden Bowl",
                    description: "A beautiful, sustainably sourced wooden bowl, perfect for serving or display.",
                    imageUrl: "https://placehold.co/400x300/8B4513/F8F8F8?text=Wooden+Bowl",
                    category: "Woodwork"
                },
                {
                    title: "Artisan Ceramic Vase",
                    description: "Unique glazed ceramic vase, ideal for flowers or as a standalone art piece.",
                    imageUrl: "https://placehold.co/400x300/A9B7A0/8B4513?text=Ceramic+Vase",
                    category: "Pottery"
                },
                {
                    title: "Knitted Wool Scarf",
                    description: "Warm and cozy hand-knitted scarf made from natural wool fibers.",
                    imageUrl: "https://placehold.co/400x300/DAA520/8B4513?text=Wool+Scarf",
                    category: "Textiles"
                },
                {
                    title: "Leather Bound Journal",
                    description: "Hand-stitched leather journal with acid-free paper, perfect for notes or sketches.",
                    imageUrl: "https://placehold.co/400x300/333333/F8F8F8?text=Leather+Journal",
                    category: "Leatherwork"
                },
                {
                    title: "Pressed Flower Art Frame",
                    description: "Delicate pressed flowers arranged in a handmade wooden frame.",
                    imageUrl: "https://placehold.co/400x300/F8F8F8/8B4513?text=Flower+Art",
                    category: "Art"
                },
                {
                    title: "Custom Engraved Cutting Board",
                    description: "Personalized wooden cutting board, a great gift for any home chef.",
                    imageUrl: "https://placehold.co/400x300/8B4513/A9B7A0?text=Cutting+Board",
                    category: "Woodwork"
                },
                {
                    title: "Silver Filigree Earrings",
                    description: "Intricately designed silver earrings, lightweight and elegant.",
                    imageUrl: "https://placehold.co/400x300/A9B7A0/F8F8F8?text=Silver+Earrings",
                    category: "Jewelry"
                },
                {
                    title: "Hand-Painted Silk Scarf",
                    description: "Vibrant silk scarf, hand-painted with unique abstract patterns.",
                    imageUrl: "https://placehold.co/400x300/DAA520/8B4513?text=Silk+Scarf",
                    category: "Textiles"
                },
                {
                    title: "Soy Wax Candle (Lavender)",
                    description: "Eco-friendly soy wax candle with a soothing lavender scent, hand-poured.",
                    imageUrl: "https://placehold.co/400x300/333333/A9B7A0?text=Soy+Candle",
                    category: "Home Goods"
                },
                {
                    title: "Watercolor Landscape Print",
                    description: "High-quality print of an original watercolor landscape painting.",
                    imageUrl: "https://placehold.co/400x300/F8F8F8/333333?text=Landscape+Art",
                    category: "Art"
                },
                {
                    title: "Hand-Stitched Leather Wallet",
                    description: "Durable and stylish leather wallet, handcrafted for everyday use.",
                    imageUrl: "https://placehold.co/400x300/8B4513/DAA520?text=Leather+Wallet",
                    category: "Leatherwork"
                },
                {
                    title: "Beaded Friendship Bracelet Set",
                    description: "Colorful set of three beaded bracelets, perfect for sharing.",
                    imageUrl: "https://placehold.co/400x300/A9B7A0/8B4513?text=Bracelets",
                    category: "Jewelry"
                }
            ];

            // Function to render product items
            function renderProductItems(startIndex, count) {
                // Use slice to get a portion of the array
                const itemsToRender = productItems.slice(startIndex, startIndex + count);

                if (itemsToRender.length === 0 && startIndex > 0) {
                    loadMoreBtn.style.display = 'none';
                    noMoreProductsMessage.style.display = 'block';
                    return;
                }

                // Use array methods (forEach) and template literals to build HTML
                itemsToRender.forEach(item => {
                    const productItemDiv = document.createElement('div');
                    productItemDiv.classList.add('product-item');
                    productItemDiv.innerHTML = `
                        <img src="${item.imageUrl}" alt="${item.title}" loading="lazy">
                        <div class="product-item-content">
                            <h4>${item.title}</h4>
                            <p>${item.description}</p>
                            <span class="product-category">${item.category}</span>
                        </div>
                    `;
                    productGallery.appendChild(productItemDiv);
                });

                // Re-initialize lazy load observer for newly added images
                const newLazyImages = productGallery.querySelectorAll('img[loading="lazy"]:not(.loaded)');
                const lazyLoadObserver = new IntersectionObserver(
                    (entries, observer) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const img = entry.target;
                                img.classList.add('loaded'); // Mark as loaded
                                observer.unobserve(img);
                            }
                        });
                    },
                    { root: null, rootMargin: '0px', threshold: 0.1 }
                );
                newLazyImages.forEach(img => lazyLoadObserver.observe(img));

                // Conditional branching: Hide load more button if all items are loaded
                if ((startIndex + count) >= productItems.length) {
                    loadMoreBtn.style.display = 'none';
                    noMoreProductsMessage.style.display = 'block';
                }
            }

            // Initial load of items
            renderProductItems(currentPage * itemsPerPage, itemsPerPage);
            currentPage++;

            // Event listener for "Load More" button
            if (loadMoreBtn) {
                loadMoreBtn.addEventListener('click', () => {
                    renderProductItems(currentPage * itemsPerPage, itemsPerPage);
                    currentPage++;
                });
            }
        });
    </script>
</body>
</html>
